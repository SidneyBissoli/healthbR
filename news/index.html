<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • healthbR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">healthbR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/healthbR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/healthbR.html">Getting started</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>DATASUS modules</h6></li>
    <li><a class="dropdown-item" href="../articles/datasus-modules.html">DATASUS modules overview</a></li>
    <li><a class="dropdown-item" href="../articles/cnes-health-facilities.html">CNES -- Health facilities</a></li>
    <li><a class="dropdown-item" href="../articles/sia-outpatient.html">SIA -- Outpatient production</a></li>
    <li><a class="dropdown-item" href="../articles/sih-hospital-admissions.html">SIH -- Hospital admissions</a></li>
    <li><a class="dropdown-item" href="../articles/sim-mortality.html">SIM -- Mortality</a></li>
    <li><a class="dropdown-item" href="../articles/sinan-notifiable-diseases.html">SINAN -- Notifiable diseases</a></li>
    <li><a class="dropdown-item" href="../articles/sinasc-live-births.html">SINASC -- Live births</a></li>
    <li><a class="dropdown-item" href="../articles/sipni-vaccination.html">SI-PNI -- Vaccination</a></li>
    <li><a class="dropdown-item" href="../articles/sisab-primary-care.html">SISAB -- Primary care</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Surveys</h6></li>
    <li><a class="dropdown-item" href="../articles/censo-denominadores.html">Censo -- Population denominators</a></li>
    <li><a class="dropdown-item" href="../articles/pnadc-household-survey.html">PNAD Continua -- Household survey</a></li>
    <li><a class="dropdown-item" href="../articles/pns-health-survey.html">PNS -- National health survey</a></li>
    <li><a class="dropdown-item" href="../articles/pof-health-data.html">POF -- Household budgets</a></li>
    <li><a class="dropdown-item" href="../articles/vigitel-telephone-survey.html">VIGITEL -- Telephone survey</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Regulatory agencies</h6></li>
    <li><a class="dropdown-item" href="../articles/ans-supplementary-health.html">ANS -- Supplementary health</a></li>
    <li><a class="dropdown-item" href="../articles/anvisa-health-surveillance.html">ANVISA -- Health surveillance</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SidneyBissoli/healthbR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Changelog</h1>
      <small>Source: <a href="https://github.com/SidneyBissoli/healthbR/blob/master/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="healthbr-020">healthbR 0.2.0<a class="anchor" aria-label="anchor" href="#healthbr-020"></a></h2>
<div class="section level3">
<h3 id="new-modules-0-2-0">New modules<a class="anchor" aria-label="anchor" href="#new-modules-0-2-0"></a></h3>
<ul><li><p><strong>CNES (National Health Facility Registry)</strong>: Health facility data from DATASUS FTP as .dbc files (2005-2024). 13 file types (ST, LT, PF, DC, EQ, SR, HB, EP, RC, IN, EE, EF, GM), monthly data per UF.</p></li>
<li><p><strong>SINAN (Notifiable Diseases Surveillance)</strong>: Disease notification microdata from DATASUS FTP as .dbc files (2007-2024). 31 diseases including DENG, CHIK, ZIKA, TUBE, HANS, HEPA, MALA, and more.</p></li>
<li><p><strong>SI-PNI (National Immunization Program)</strong>: Aggregated vaccination data from DATASUS FTP as .DBF files (1994-2019), plus individual-level microdata from OpenDataSUS CSV (2020-2025). Transparent year-based routing between sources.</p></li>
<li><p><strong>SISAB (Primary Care Health Information)</strong>: Coverage indicators from the relatorioaps REST API. 4 report types (aps, sb, acs, pns) at 4 geographic levels (brazil, region, uf, municipality).</p></li>
<li><p><strong>ANS (Supplementary Health)</strong>: Beneficiary, complaint, and financial data from the ANS open data portal. Plus <code><a href="../reference/ans_operators.html">ans_operators()</a></code> for operator registry.</p></li>
<li><p><strong>ANVISA (Health Surveillance)</strong>: Product registrations, pharmacovigilance, hemovigilance, technovigilance, and controlled substance sales (SNGPC) from the ANVISA open data portal. 14 data types total.</p></li>
<li><p><strong>POF (Household Budget Survey)</strong>: Food security, consumption, and health expenditure microdata from IBGE FTP (2002-2003, 2008-2009, 2017-2018).</p></li>
<li><p><strong>PNADC (PNAD Continua)</strong>: Health-related supplementary modules from PNAD Continua (deficiencia, habitacao, moradores, APS).</p></li>
<li><p><strong>PNS (National Health Survey)</strong>: Microdata and SIDRA tabulated data (2013, 2019).</p></li>
<li><p><strong>Censo Demografico</strong>: Population denominators from the IBGE SIDRA API, covering Census years 1970-2022 and intercensitary estimates 2001-2021.</p></li>
</ul></div>
<div class="section level3">
<h3 id="performance-improvements-0-2-0">Performance improvements<a class="anchor" aria-label="anchor" href="#performance-improvements-0-2-0"></a></h3>
<ul><li><p>Hive-style partitioned parquet caching for all DATASUS modules.</p></li>
<li><p>Lazy evaluation with <code>lazy = TRUE</code> and <code>backend = "arrow"</code> or <code>"duckdb"</code> for out-of-memory queries.</p></li>
<li><p>Parallel downloads via <code>.map_parallel()</code> (furrr when configured, purrr fallback).</p></li>
<li><p>Concurrent HTTP downloads for SI-PNI multi-month CSV requests via <code><a href="https://jeroen.r-universe.dev/curl/reference/multi_download.html" class="external-link">curl::multi_download()</a></code>.</p></li>
<li><p>Resumable HTTP downloads via Range headers for large files.</p></li>
<li><p>Smart type parsing (<code>parse = TRUE</code>) for all 7 DATASUS modules, with automatic numeric and date column conversion. Use <code>col_types</code> for fine-grained control or <code>parse = FALSE</code> for all-character.</p></li>
</ul></div>
<div class="section level3">
<h3 id="refactoring-0-2-0">Refactoring<a class="anchor" aria-label="anchor" href="#refactoring-0-2-0"></a></h3>
<ul><li><p>Extracted shared helpers for validation, search, cache management, and return logic, eliminating ~1100 lines of duplication across modules.</p></li>
<li><p>Removed deprecated flat cache migration infrastructure.</p></li>
<li><p>Moved <code>readxl</code> and <code>haven</code> from Imports to Suggests.</p></li>
<li><p>Removed unused <code>vroom</code> from Suggests.</p></li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-2-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-2-0"></a></h3>
<ul><li><p>Complete refactoring of VIGITEL functions due to Ministry of Health website restructuring. Data is now distributed as a single consolidated file containing all years (2006-2024) instead of separate files per year.</p></li>
<li>
<p><code><a href="../reference/vigitel_data.html">vigitel_data()</a></code> API changed: new <code>format</code> parameter, <code>year</code> defaults to</p>
<p>NULL (all years), removed <code>lazy</code>/<code>parallel</code>/<code>force_download</code> parameters.</p>
</li>
<li><p>Removed <code>vigitel_download()</code> and <code>vigitel_convert_to_parquet()</code> functions.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-2-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2-0"></a></h3>
<ul><li>Fixed PNS Arrow expression error with partition filtering.</li>
<li>Fixed <code><a href="../reference/pns_sidra_data.html">pns_sidra_data()</a></code> unknown table warning.</li>
<li>Fixed POF dictionary parsing failure on Linux/Ubuntu.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="healthbr-011">healthbR 0.1.1<a class="anchor" aria-label="anchor" href="#healthbr-011"></a></h2><p class="text-muted">CRAN release: 2026-02-04</p>
<div class="section level3">
<h3 id="changes-0-1-1">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-1"></a></h3>
<ul><li><p>Moved <code>arrow</code> package from <code>Imports</code> to <code>Suggests</code> for better cross-platform compatibility. The package now checks for <code>arrow</code> availability and provides informative error messages with installation instructions when needed.</p></li>
<li><p>Added <code>cache_dir</code> parameter to all data fetching functions (<code><a href="../reference/vigitel_data.html">vigitel_data()</a></code>, <code>vigitel_download()</code>, <code><a href="../reference/vigitel_variables.html">vigitel_variables()</a></code>, <code><a href="../reference/vigitel_dictionary.html">vigitel_dictionary()</a></code>, <code><a href="../reference/vigitel_cache_status.html">vigitel_cache_status()</a></code>, <code><a href="../reference/vigitel_clear_cache.html">vigitel_clear_cache()</a></code>). This allows using <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code> for temporary storage that doesn’t persist after the R session.</p></li>
<li><p>Updated examples to use <code>cache_dir = tempdir()</code> to avoid leaving files on the system during CRAN checks.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="healthbr-010">healthbR 0.1.0<a class="anchor" aria-label="anchor" href="#healthbr-010"></a></h2><p class="text-muted">CRAN release: 2026-02-03</p>
<div class="section level3">
<h3 id="healthbr-0-1-0">healthbR 0.0.0.9000<a class="anchor" aria-label="anchor" href="#healthbr-0-1-0"></a></h3>
<div class="section level4">
<h4 id="new-features-0-1-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-0"></a></h4>
<ul><li>
<code><a href="../reference/vigitel_years.html">vigitel_years()</a></code> - list available VIGITEL survey years</li>
<li>
<code><a href="../reference/vigitel_variables.html">vigitel_variables()</a></code> - list variables available in a specific year</li>
<li>
<code><a href="../reference/vigitel_dictionary.html">vigitel_dictionary()</a></code> - get the data dictionary with variable descriptions</li>
<li>
<code><a href="../reference/vigitel_data.html">vigitel_data()</a></code> - download and load VIGITEL data with multiple options:
<ul><li>Support for single or multiple years</li>
<li>Automatic caching to avoid repeated downloads</li>
<li>Parquet conversion for faster subsequent loads</li>
<li>Parallel downloads with <code>furrr</code>
</li>
<li>Lazy evaluation with Arrow for memory-efficient processing</li>
</ul></li>
<li>
<code>vigitel_convert_to_parquet()</code> - convert cached Excel files to Parquet format</li>
</ul></div>
<div class="section level4">
<h4 id="performance-0-1-0">Performance<a class="anchor" aria-label="anchor" href="#performance-0-1-0"></a></h4>
<ul><li>Parquet format support for 10-20x faster data loading</li>
<li>Parallel download support via <code>furrr</code> package</li>
<li>Lazy evaluation via Arrow for processing large datasets without loading into RAM</li>
</ul></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sidney Bissoli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

