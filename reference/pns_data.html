<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Download PNS microdata — pns_data • healthbR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Download PNS microdata — pns_data"><meta name="description" content="Downloads and returns PNS microdata for specified years from the IBGE FTP.
Data is cached locally to avoid repeated downloads. When the arrow package
is installed, data is cached in parquet format for faster subsequent reads."><meta property="og:description" content="Downloads and returns PNS microdata for specified years from the IBGE FTP.
Data is cached locally to avoid repeated downloads. When the arrow package
is installed, data is cached in parquet format for faster subsequent reads."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">healthbR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/healthbR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/censo-denominadores.html">Population Denominators from the Census with healthbR</a></li>
    <li><a class="dropdown-item" href="../articles/datasus-modules.html">DATASUS Modules: SIM, SINASC, SIH, and SIA</a></li>
    <li><a class="dropdown-item" href="../articles/pof-health-data.html">Analyzing Health Data from POF with healthbR</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SidneyBissoli/healthbR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Download PNS microdata</h1>
      <small class="dont-index">Source: <a href="https://github.com/SidneyBissoli/healthbR/blob/master/R/pns.R" class="external-link"><code>R/pns.R</code></a></small>
      <div class="d-none name"><code>pns_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Downloads and returns PNS microdata for specified years from the IBGE FTP.
Data is cached locally to avoid repeated downloads. When the <code>arrow</code> package
is installed, data is cached in parquet format for faster subsequent reads.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pns_data</span><span class="op">(</span>year <span class="op">=</span> <span class="cn">NULL</span>, vars <span class="op">=</span> <span class="cn">NULL</span>, cache_dir <span class="op">=</span> <span class="cn">NULL</span>, refresh <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-year">year<a class="anchor" aria-label="anchor" href="#arg-year"></a></dt>
<dd><p>Numeric or vector. Year(s) to download (2013, 2019).
Use NULL to download all available years. Default is NULL.</p></dd>


<dt id="arg-vars">vars<a class="anchor" aria-label="anchor" href="#arg-vars"></a></dt>
<dd><p>Character vector. Variables to select. Use NULL for all variables.
Default is NULL.</p></dd>


<dt id="arg-cache-dir">cache_dir<a class="anchor" aria-label="anchor" href="#arg-cache-dir"></a></dt>
<dd><p>Character. Directory for caching downloaded files.
Default uses <code>tools::R_user_dir("healthbR", "cache")</code>.</p></dd>


<dt id="arg-refresh">refresh<a class="anchor" aria-label="anchor" href="#arg-refresh"></a></dt>
<dd><p>Logical. If TRUE, re-download even if file exists in cache.
Default is FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble with PNS microdata.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The PNS (Pesquisa Nacional de Saude) is a household survey conducted by IBGE
in partnership with the Ministry of Health. It provides comprehensive data on
health conditions, lifestyle, and healthcare access of the Brazilian population.</p><div class="section">
<h3 id="survey-design-variables">Survey design variables<a class="anchor" aria-label="anchor" href="#survey-design-variables"></a></h3>


<p>For proper statistical analysis with complex survey design, use the following
weight variables with the <code>srvyr</code> or <code>survey</code> packages:</p><ul><li><p><code>V0028</code>: household weight</p></li>
<li><p><code>V0029</code>: selected person weight</p></li>
<li><p><code>V0030</code>: person weight with non-response adjustment</p></li>
<li><p><code>UPA_PNS</code>: primary sampling unit</p></li>
<li><p><code>V0024</code>: stratum</p></li>
</ul></div>

    </div>
    <div class="section level2">
    <h2 id="data-source">Data source<a class="anchor" aria-label="anchor" href="#data-source"></a></h2>


<p>Data is downloaded from the IBGE FTP server:
<a href="https://ftp.ibge.gov.br/PNS/" class="external-link">https://ftp.ibge.gov.br/PNS/</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># download PNS 2019 data</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">pns_data</span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2019</span>, cache_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloading PNS 2019 data from IBGE...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> URL: <span style="color: #0000BB; font-style: italic;">&lt;https://ftp.ibge.gov.br/PNS/2019/Microdados/Dados/PNS_2019_20220525.zip&gt;</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> This may take a few minutes...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Download complete: <span style="color: #0000BB;">/tmp/RtmpJ1hFKo/pns/PNS_2019_20220525.zip</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Extracting and reading PNS 2019 data...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attempting to read as delimited text...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Saving to cache...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Loaded <span style="color: #0000BB;">293725</span> observations from <span style="color: #0000BB;">1</span> year: <span style="color: #0000BB;">"2019"</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># download all years</span></span></span>
<span class="r-in"><span><span class="va">df_all</span> <span class="op">&lt;-</span> <span class="fu">pns_data</span><span class="op">(</span>cache_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloading PNS 2013 data from IBGE...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> URL: <span style="color: #0000BB; font-style: italic;">&lt;https://ftp.ibge.gov.br/PNS/2013/Microdados/Dados/PNS_2013.zip&gt;</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> This may take a few minutes...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Download complete: <span style="color: #0000BB;">/tmp/RtmpJ1hFKo/pns/PNS_2013.zip</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Extracting and reading PNS 2013 data...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attempting to read as delimited text...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Saving to cache...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading PNS 2019 from cache...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Loaded <span style="color: #0000BB;">516109</span> observations from <span style="color: #0000BB;">2</span> years: <span style="color: #0000BB;">"2013"</span> and <span style="color: #0000BB;">"2019"</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># select specific variables</span></span></span>
<span class="r-in"><span><span class="va">df_subset</span> <span class="op">&lt;-</span> <span class="fu">pns_data</span><span class="op">(</span></span></span>
<span class="r-in"><span>  year <span class="op">=</span> <span class="fl">2019</span>,</span></span>
<span class="r-in"><span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"V0001"</span>, <span class="st">"C006"</span>, <span class="st">"C008"</span>, <span class="st">"V0028"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  cache_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading PNS 2019 from cache...</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Variables not found: <span style="color: #0000BB;">"V0001"</span>, <span style="color: #0000BB;">"C006"</span>, <span style="color: #0000BB;">"C008"</span>, and <span style="color: #0000BB;">"V0028"</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Loaded <span style="color: #0000BB;">293725</span> observations from <span style="color: #0000BB;">1</span> year: <span style="color: #0000BB;">"2019"</span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sidney Bissoli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

