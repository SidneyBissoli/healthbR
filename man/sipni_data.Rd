% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sipni.R
\name{sipni_data}
\alias{sipni_data}
\title{Download SI-PNI Vaccination Data}
\usage{
sipni_data(
  year,
  type = "DPNI",
  uf = NULL,
  vars = NULL,
  cache = TRUE,
  cache_dir = NULL
)
}
\arguments{
\item{year}{Integer. Year(s) of the data. Required.}

\item{type}{Character. File type to download. Default: \code{"DPNI"}
(doses applied). Use \code{"CPNI"} for vaccination coverage.
See \code{\link{sipni_info}()} for details.}

\item{uf}{Character. Two-letter state abbreviation(s) to download.
If NULL (default), downloads all 27 states.
Example: \code{"SP"}, \code{c("SP", "RJ")}.}

\item{vars}{Character vector. Variables to keep. If NULL (default),
returns all available variables. Use \code{\link{sipni_variables}()} to see
available variables.}

\item{cache}{Logical. If TRUE (default), caches downloaded data for
faster future access.}

\item{cache_dir}{Character. Directory for caching. Default:
\code{tools::R_user_dir("healthbR", "cache")}.}
}
\value{
A tibble with vaccination data. Includes columns
\code{year} and \code{uf_source} to identify the source
when multiple years/states are combined.
}
\description{
Downloads and returns vaccination data (doses applied or coverage) from
DATASUS FTP. Data is aggregated (counts per municipality/vaccine/age group),
not individual-level microdata.
}
\details{
Data is downloaded from DATASUS FTP as plain .DBF files (one per
type/state/year). Unlike other DATASUS modules, SI-PNI files are not
DBC-compressed.

SI-PNI data is \strong{aggregated} (dose counts and coverage rates per
municipality, vaccine, and age group), not individual-level microdata.

Two file types are available:
\itemize{
\item \code{"DPNI"} (default): Doses applied -- monthly data within each
annual file, with age group and dose type breakdowns.
\item \code{"CPNI"}: Vaccination coverage -- annual rates including
target population and coverage percentage.
}

Data on DATASUS FTP is available from 1994 to 2019. Post-2019 data
requires the SI-PNI web API (not yet supported).
}
\examples{
\dontshow{if (interactive()) withAutoprint(\{ # examplesIf}
# doses applied in Acre, 2019
ac_doses <- sipni_data(year = 2019, uf = "AC")

# vaccination coverage in Acre, 2019
ac_cob <- sipni_data(year = 2019, type = "CPNI", uf = "AC")

# only key variables
sipni_data(year = 2019, uf = "AC",
           vars = c("IMUNO", "QT_DOSE", "DOSE", "FX_ETARIA"))
\dontshow{\}) # examplesIf}
}
\seealso{
\code{\link{sipni_info}()} for type descriptions,
\code{\link{censo_populacao}()} for population denominators.

Other sipni: 
\code{\link{sipni_cache_status}()},
\code{\link{sipni_clear_cache}()},
\code{\link{sipni_dictionary}()},
\code{\link{sipni_info}()},
\code{\link{sipni_variables}()},
\code{\link{sipni_years}()}
}
\concept{sipni}
